<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Configuring Logging :: Red Hat JBoss EAP 8 Administration I</title>
    <link rel="prev" href="database.html">
    <link rel="next" href="messaging.html">
    <meta name="generator" content="Antora 3.1.3">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <script>var uiRootPath = '../../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://www.redhat.com" target="_blank"><img
          src="../../../_/img/redhat-logo.png"
          height="40px"
          alt="Red Hat"
        /></a>
      <a
        class="navbar-item"
        style="font-size: 24px; color: white"
        href="../../.."
      >Red Hat JBoss EAP 8 Administration I</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a
          class="navbar-item"
          href="https://github.com/RedHatQuickCourses/eap-admin1/issues"
          target="_blank"
        >Report Issues</a>
      </div>
    </div>
  </nav>
</header><div class="body">
<div class="nav-container" data-component="eap-admin1" data-version="8">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">Red Hat JBoss EAP 8 Administration I</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../index.html">Home</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../install/index.html">Introduction to Red Hat JBoss EAP 8</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../install/install.html">Red Hat JBoss Enterprise Application Platform 8 Installation Methods</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../install/admin.html">Managing Red Hat JBoss EAP 8</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../install/extensions.html">Interpreting Extensions, Subsystems, and Profiles</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../config/index.html">Configuration</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../config/eap-config.html">Red Hat JBoss EAP 8 Configuration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../config/eap-cli.html">Red Hat JBoss EAP 8 CLI</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../config/deploy.html">Deploying Applications to a Standalone Server</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="index.html">Subsystems</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="database.html">Exploring the Data Source Subsystem</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="logging.html">Configuring Logging</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="messaging.html">Configuring Messaging (JMS)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="web.html">Configuring the Web Subsystem</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Red Hat JBoss EAP 8 Administration I</span>
    <span class="version">8</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="../index.html">Red Hat JBoss EAP 8 Administration I</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">8</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">Red Hat JBoss EAP 8 Administration I</a></li>
    <li><a href="index.html">Subsystems</a></li>
    <li><a href="logging.html">Configuring Logging</a></li>
  </ul>
</nav>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Configuring Logging</h1>
<div class="sect1">
<h2 id="_red_hat_jboss_eap_8_logging_subsystem"><a class="anchor" href="#_red_hat_jboss_eap_8_logging_subsystem"></a>Red Hat JBoss EAP 8 Logging Subsystem</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Logging is vital for application servers like Red Hat JBoss EAP 8.</p>
</li>
<li>
<p>Red Hat JBoss EAP 8&#8217;s logging subsystem, consistent with its modular design, is managed by a subsystem and configured in <code>domain.xml</code> for managed domain mode and <code>standalone.xml</code> for standalone servers.</p>
</li>
<li>
<p>The subsystem comprises of three key components:</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Handlers</strong>:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>These dictate where and how server events are logged.</p>
</li>
<li>
<p>JBoss EAP offers various built-in handlers for logging application messages.</p>
</li>
</ol>
</div>
</li>
<li>
<p><strong>Loggers</strong>:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Also known as log categories, these organize events into logical groups based on package namespaces within the Java Virtual Machine.</p>
</li>
<li>
<p>They specify which handlers process and log messages.</p>
</li>
</ol>
</div>
</li>
<li>
<p><strong>Root Logger</strong>:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Positioned atop the logger hierarchy, the root logger captures all log messages of a specified level not handled by specific log categories.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_default_log_file_locations"><a class="anchor" href="#_default_log_file_locations"></a>Default Log File Locations</h3>
<div class="ulist">
<ul>
<li>
<p><strong>Standalone Mode</strong>:</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Log files reside in the <strong>standalone/log</strong> directory within the base directory.</p>
</li>
<li>
<p>This directory contains two key log files:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p><strong>gc.log.0.current</strong>: Managed by settings in <strong>BASE_DIR/bin/standalone.sh</strong>, exclusively logs JVM flags and memory management events from the latest server startup.</p>
</li>
<li>
<p><strong>server.log</strong>: Containing server log events, with ongoing additions, this file&#8217;s configurations are specified within the logging subsystem section of <strong>standalone.xml</strong>.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
</li>
<li>
<p><strong>Domain Mode</strong>:</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Logging spans several locations relative to the base directory.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p><strong>domain/log/host-controller.log</strong>: Documents host controller startup events, including connection issues, debug messages, and runtime errors.</p>
</li>
<li>
<p><strong>domain/log/process-controller.log</strong>: Records process startup and shutdown events on the host, including those of the host controller and individual servers.</p>
</li>
<li>
<p><strong>domain/servers/&lt;server-name&gt;/log/server.log</strong>: Houses log events specific to each server on the host.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Each server on a host possesses its own log directory. For instance, if a host includes a server named dev-server-one, its log file resides in <strong>domain/servers/dev-server-one/log/server.log</strong>.</p>
</li>
</ol>
</div>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>It&#8217;s advisable to regularly rotate server.log files, typically on an hourly or daily basis, or when file size thresholds are met.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_built_in_log_handlers"><a class="anchor" href="#_built_in_log_handlers"></a>Built-in Log Handlers</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Red Hat JBoss EAP 8 features built-in handlers, including:</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Console handler</strong>: Writes to the console. Configured using the <strong>&lt;console-handler&gt;</strong> element.</p>
</li>
<li>
<p><strong>File handler</strong>: Writes to a file. Configured using the <strong>&lt;file-handler&gt;</strong> element.</p>
</li>
<li>
<p><strong>Periodic-rotating file handler</strong>: Rotates logs based on time intervals. Configured using the <strong>&lt;periodic-rotating-file-handler&gt;</strong> element.</p>
</li>
<li>
<p><strong>Size-rotating file handler</strong>: Rotates logs based on file size. Configured using the <strong>&lt;size-rotating-file-handler&gt;</strong> element.</p>
</li>
<li>
<p><strong>Asynchronous handler</strong>: Writes logs asynchronously to sub-handlers. Configured using the <strong>&lt;async-handler&gt;</strong> element.</p>
</li>
<li>
<p><strong>Syslog handler</strong>: Sends events to a remote syslog server. configured using the <strong>&lt;syslog-handler&gt;</strong> element.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Handlers are configured within the logging subsystem section of the server configuration file.</p>
</li>
<li>
<p>For example, the <strong>standalone.xml</strong> file and most of the profiles in the <strong>domain.xml</strong> file come preconfigured with a <strong>&lt;console-handler&gt;</strong> definition.</p>
<div class="listingblock">
<div class="content">
<pre>[standalone@localhost:9990 /] /subsystem=logging/console-handler=CONSOLE:read-resource
{
    "outcome" =&gt; "success",
    "result" =&gt; {
        "autoflush" =&gt; true,
        "enabled" =&gt; true,
        "encoding" =&gt; undefined,
        "filter" =&gt; undefined,
        "filter-spec" =&gt; undefined,
        "formatter" =&gt; "%d{HH:mm:ss,SSS} %-5p [%c] (%t) %s%e%n",
        "level" =&gt; "DEBUG",
        "name" =&gt; "CONSOLE",
        "named-formatter" =&gt; "COLOR-PATTERN",
        "target" =&gt; "System.out"
    }
}</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_lab_1_change_log_level_using_jboss_cli"><a class="anchor" href="#_lab_1_change_log_level_using_jboss_cli"></a>Lab 1: Change log level using JBoss CLI</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>Outcome</strong>: In this lab, you check the current log level and change it to "DEBUG" using JBoss EAP CLI.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Start the standalone Red Hat JBoss EAP 8 server.</p>
<div class="listingblock">
<div class="content">
<pre>[vagrant@server ~]$ cd /opt/EAP-8.0.0/bin/
[vagrant@server bin]$ sudo -u jboss ./standalone.sh</pre>
</div>
</div>
</li>
<li>
<p>Open another terminal and connect to the JBoss EAP CLI.</p>
<div class="listingblock">
<div class="content">
<pre>[vagrant@server bin]$ sudo -u jboss ./jboss-cli.sh -c</pre>
</div>
</div>
</li>
<li>
<p>Confirm the current log level is "INFO" by executing command shown below.</p>
<div class="listingblock">
<div class="content">
<pre>[standalone@localhost:9990 /]  /subsystem=logging/root-logger=ROOT:read-resource
{
    "outcome" =&gt; "success",
    "result" =&gt; {
        "filter" =&gt; undefined,
        "filter-spec" =&gt; undefined,
        "handlers" =&gt; [
            "CONSOLE",
            "FILE"
        ],
        "level" =&gt; "INFO"
    }
}</pre>
</div>
</div>
</li>
<li>
<p>Change the log level to "DEBUG" using the command shown below.</p>
<div class="listingblock">
<div class="content">
<pre>[standalone@localhost:9990 /] /subsystem=logging/root-logger=ROOT:write-attribute(name="level", value="DEBUG")
{"outcome" =&gt; "success"}</pre>
</div>
</div>
</li>
<li>
<p>Confirm the log level is updated to "DEBUG".</p>
<div class="listingblock">
<div class="content">
<pre>[standalone@localhost:9990 /]  /subsystem=logging/root-logger=ROOT:read-resource
{
    "outcome" =&gt; "success",
    "result" =&gt; {
        "filter" =&gt; undefined,
        "filter-spec" =&gt; undefined,
        "handlers" =&gt; [
            "CONSOLE",
            "FILE"
        ],
        "level" =&gt; "DEBUG"
    }
}</pre>
</div>
</div>
</li>
<li>
<p>Notice the logs in the first terminal shows "DEBUG" logs:</p>
<div class="listingblock">
<div class="content">
<pre>...output_omitted...
07:34:51,304 DEBUG [org.jboss.as.repository] (ServerService Thread Pool -- 77) Current content hash references are {f9418ea27525e0f3c02ea099405265246b22b55a=[ContentReference{contentIdentifier=/deployment=kitchensink.war, hexHash=f9418ea27525e0f3c02ea099405265246b22b55a}], 555df23b973ed9f76f7c817deec3bab6a13a7ea3=[ContentReference{contentIdentifier=/deployment=temperature-converter.war, hexHash=555df23b973ed9f76f7c817deec3bab6a13a7ea3}]}
07:39:51,306 DEBUG [org.jboss.as.repository] (ServerService Thread Pool -- 77) Current content hash references are {f9418ea27525e0f3c02ea099405265246b22b55a=[ContentReference{contentIdentifier=/deployment=kitchensink.war, hexHash=f9418ea27525e0f3c02ea099405265246b22b55a}], 555df23b973ed9f76f7c817deec3bab6a13a7ea3=[ContentReference{contentIdentifier=/deployment=temperature-converter.war, hexHash=555df23b973ed9f76f7c817deec3bab6a13a7ea3}]}
...output_omitted...</pre>
</div>
</div>
</li>
<li>
<p>Stop the standalone server and JBoss CLI by pressing <code>Ctrl+C</code>.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_lab_2_configuring_logging_handlers"><a class="anchor" href="#_lab_2_configuring_logging_handlers"></a>Lab 2: Configuring Logging Handlers</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>Outcome</strong>: In this lab, you create a size rotating file handler and verify that it&#8217;s created successfully.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Start the standalone Red Hat JBoss EAP 8 server.</p>
<div class="listingblock">
<div class="content">
<pre>[vagrant@server ~]$ cd /opt/EAP-8.0.0/bin/
[vagrant@server bin]$ sudo -u jboss ./standalone.sh</pre>
</div>
</div>
</li>
<li>
<p>Open another terminal and connect to the JBoss EAP CLI.</p>
<div class="listingblock">
<div class="content">
<pre>[vagrant@server bin]$ sudo -u jboss ./jboss-cli.sh -c</pre>
</div>
</div>
</li>
<li>
<p>Create custom handler named '<strong>CUSTOM_HANDLER</strong>' that would capture all of the logs generated by the category <strong>com.example.www</strong> in a file called <strong>/opt/EAP-8.0.0/standalone/log/logtest.log</strong>, after the log file reaches 1 MB in size, the logging subsystem should rotates the log file to a new log file with a numbered suffix.</p>
<div class="listingblock">
<div class="content">
<pre>[standalone@localhost:9990 /] /subsystem=logging/size-rotating-file-handler=CUSTOM_HANDLER/:add\
&gt; (file={"path"=&gt;"logtest.log",\
&gt; "relative-to"=&gt;"jboss.server.log.dir"},\
&gt; formatter="%d{HH:mm:ss,SSS} %-5p [%c] (%t) %s%E%n",\
&gt; level=DEBUG,max-backup-index=3,name=CUSTOM_HANDLER,\
&gt; rotate-size=1m)
{"outcome" =&gt; "success"}

[standalone@localhost:9990 /] /subsystem=logging/logger=com.example.www:add\
(category=com.example.www,handlers=["CUSTOM_HANDLER"])</pre>
</div>
</div>
</li>
<li>
<p>Verify that the handler was added successfully.</p>
<div class="listingblock">
<div class="content">
<pre>[standalone@localhost:9990 /] /subsystem=logging/size-rotating-file-handler=CUSTOM_HANDLER:read-resource
{
    "outcome" =&gt; "success",
    "result" =&gt; {
        "append" =&gt; true,
        "autoflush" =&gt; true,
        "enabled" =&gt; true,
        "encoding" =&gt; undefined,
        "file" =&gt; {
            "path" =&gt; "logtest.log",
            "relative-to" =&gt; "jboss.server.log.dir"
        },
        "filter" =&gt; undefined,
        "filter-spec" =&gt; undefined,
        "formatter" =&gt; "%d{HH:mm:ss,SSS} %-5p [%c] (%t) %s%E%n",
        "level" =&gt; "DEBUG",
        "max-backup-index" =&gt; 3,
        "name" =&gt; "CUSTOM_HANDLER",
        "named-formatter" =&gt; undefined,
        "rotate-on-boot" =&gt; false,
        "rotate-size" =&gt; "1m",
        "suffix" =&gt; undefined
    }
}</pre>
</div>
</div>
</li>
<li>
<p>Open a new terminal and confirm the respective log file is create.</p>
<div class="listingblock">
<div class="content">
<pre>[vagrant@server ~]$ ls -ld /opt/EAP-8.0.0/standalone/log/logtest.log
-rw-r--r--. 1 jboss jboss 0 Apr 30 08:59 /opt/EAP-8.0.0/standalone/log/logtest.log</pre>
</div>
</div>
</li>
<li>
<p>Stop the standalone server and JBoss CLI by pressing <code>Ctrl+C</code>.</p>
</li>
</ul>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="database.html">Exploring the Data Source Subsystem</a></span>
  <span class="next"><a href="messaging.html">Configuring Messaging (JMS)</a></span>
</nav>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <img src="../../../_/img/rhl-logo-red.png" height="40px" alt="Red Hat"  href="https://redhat.com" >
</footer><script id="site-script" src="../../../_/js/site.js" data-ui-root-path="../../../_"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
