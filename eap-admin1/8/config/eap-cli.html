<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Red Hat JBoss EAP 8 CLI :: Red Hat JBoss EAP Administration I</title>
    <link rel="prev" href="eap-config.html">
    <link rel="next" href="deploy.html">
    <meta name="generator" content="Antora 3.1.3">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <script>var uiRootPath = '../../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://www.redhat.com" target="_blank"><img
          src="../../../_/img/redhat-logo.png"
          height="40px"
          alt="Red Hat"
        /></a>
      <a
        class="navbar-item"
        style="font-size: 24px; color: white"
        href="../../.."
      >Red Hat JBoss EAP Administration I</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a
          class="navbar-item"
          href="https://github.com/RedHatQuickCourses/eap-admin1/issues"
          target="_blank"
        >Report Issues</a>
      </div>
    </div>
  </nav>
</header><div class="body">
<div class="nav-container" data-component="eap-admin1" data-version="8">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">Red Hat JBoss EAP Administration I</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../index.html">Home</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../install/index.html">Introduction to Red Hat JBoss EAP 8</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../install/install.html">Red Hat JBoss Enterprise Application Platform 8 Installation Methods</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../install/admin.html">Managing Red Hat JBoss EAP 8</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../install/extensions.html">Interpreting Extensions, Subsystems, and Profiles</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="index.html">Configuration</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="eap-config.html">Red Hat JBoss EAP 8 Configuration</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="eap-cli.html">Red Hat JBoss EAP 8 CLI</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="deploy.html">Deploying Applications to a Standalone Server</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../subsystems/index.html">Subsystems</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../subsystems/database.html">Exploring the Data Source Subsystem</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../subsystems/logging.html">Configuring Logging</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../subsystems/messaging.html">Configuring Messaging (JMS)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../subsystems/web.html">Configuring the Web Subsystem</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Red Hat JBoss EAP Administration I</span>
    <span class="version">8</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="../index.html">Red Hat JBoss EAP Administration I</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">8</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">Red Hat JBoss EAP Administration I</a></li>
    <li><a href="index.html">Configuration</a></li>
    <li><a href="eap-cli.html">Red Hat JBoss EAP 8 CLI</a></li>
  </ul>
</nav>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Red Hat JBoss EAP 8 CLI</h1>
<div id="preamble">
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Red Hat JBoss EAP 8 employs XML files for configuration, offering three methods:</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Management console</strong>: Red Hat JBoss EAP 8 offers an easy to use web console to configure various subsystems of JBoss EAP.</p>
</li>
<li>
<p><strong>Management CLI</strong>: A command-line tool for configuration and scripting.</p>
</li>
<li>
<p><strong>Manual XML editing</strong>: It&#8217;s typically advised to avoid directly modifying XML configuration files, although there are situations where it may become necessary.</p>
</li>
</ol>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Benefits of the management CLI include GUI-free server management and scriptable task execution, while offering comprehensive configuration control compared to the console.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_executing_commands"><a class="anchor" href="#_executing_commands"></a>Executing Commands</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Run the <code>jboss-cli.sh</code> script to start the management CLI from the bin directory of the JBoss EAP installation.</p>
</li>
<li>
<p>Without arguments, it runs in disconnected mode:</p>
<div class="listingblock">
<div class="content">
<pre>[vagrant@server bin]$ $JBOSS_HOME/bin/jboss-cli.sh
You are disconnected at the moment. Type 'connect' to connect to the server or 'help' for the list of supported commands.
[disconnected /]</pre>
</div>
</div>
</li>
<li>
<p>The connect command connects to the default host (localhost) and port (9990) if no arguments are provided:</p>
<div class="listingblock">
<div class="content">
<pre>[disconnected /] connect localhost:9990
Authenticating against security realm: ManagementRealm
Username: XXXXXXX
Password: XXXXXXX
[standalone@localhost:9990 /]</pre>
</div>
</div>
</li>
<li>
<p>To automatically connect, use the <code>--connect</code> or <code>-c</code> argument:</p>
<div class="listingblock">
<div class="content">
<pre>[vagrant@server bin]$ sudo -u jboss $JBOSS_HOME/bin/jboss-cli.sh --connect
[standalone@localhost:9990 /]

[vagrant@server bin]$ sudo -u jboss $JBOSS_HOME/bin/jboss-cli.sh -c
[standalone@localhost:9990 /]</pre>
</div>
</div>
</li>
<li>
<p>For connecting to a different host, use the --controller argument:</p>
<div class="listingblock">
<div class="content">
<pre>[vagrant@server bin]$ $JBOSS_HOME/bin/jboss-cli.sh --connect --controller=ip:port</pre>
</div>
</div>
</li>
<li>
<p>Optionally you can use --user and --password to pass credentials if needed.</p>
<div class="listingblock">
<div class="content">
<pre>[vagrant@server bin]$ $JBOSS_HOME/bin/jboss-cli.sh --connect  \
--user=XXXXX --password=XXXXX</pre>
</div>
</div>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_red_hat_jboss_eap_8_commands"><a class="anchor" href="#_red_hat_jboss_eap_8_commands"></a>Red Hat JBoss EAP 8 Commands</h3>
<div class="ulist">
<ul>
<li>
<p>The management CLI for Red Hat JBoss EAP 8 offers user-friendly commands that translate into operation requests.</p>
</li>
<li>
<p>Basic supported commands include:</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>connect</strong>: Connect to the server or domain controller.</p>
</li>
<li>
<p><strong>cn or cd</strong>: Change the current node path.</p>
</li>
<li>
<p><strong>ls</strong>: List contents of the node path.</p>
</li>
<li>
<p><strong>help</strong>: Display the help page.</p>
</li>
<li>
<p><strong>history</strong>: Manage history expansion.</p>
</li>
<li>
<p><strong>version</strong>: Print version and environment information.</p>
</li>
<li>
<p><strong>pwn or pwd</strong>: Print the current working node.</p>
</li>
<li>
<p><strong>data-source</strong>: Manage resources of the /subsystem=datasources/data-source type.</p>
</li>
<li>
<p><strong>deploy</strong>: Deploy an application.</p>
</li>
<li>
<p><strong>undeploy</strong>: Undeploy an application.</p>
</li>
<li>
<p><strong>exit or quit</strong>: Quit the management CLI.</p>
</li>
</ol>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_operations"><a class="anchor" href="#_operations"></a>Operations</h3>
<div class="ulist">
<ul>
<li>
<p>Operations are a low level way to manage the JBoss EAP server.</p>
</li>
<li>
<p>Operations in the JBoss EAP 8 server management CLI follow this format:</p>
<div class="listingblock">
<div class="content">
<pre>[node] :operation_name [ parameters ] [ headers ]</pre>
</div>
</div>
</li>
<li>
<p>Format explaination:</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The node is a key/value pair representing the target resource address.</p>
</li>
<li>
<p>You define the operation name with optional parameters.</p>
</li>
<li>
<p>Common operations include -</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p><strong>:read-resource</strong> for reading attributes. Eg:</p>
<div class="listingblock">
<div class="content">
<pre>[standalone@localhost:9990 /] :read-resource
{
    "outcome" =&gt; "success",
    "result" =&gt; {
        "management-major-version" =&gt; 22,
        "management-micro-version" =&gt; 0,
...output_omitted...</pre>
</div>
</div>
</li>
<li>
<p><strong>:reload</strong> for server restart. The Java process is not restarted.</p>
<div class="listingblock">
<div class="content">
<pre>[standalone@localhost:9990 /] :reload
{
    "outcome" =&gt; "success",
    "result" =&gt; undefined
}</pre>
</div>
</div>
</li>
<li>
<p><strong>:remove</strong> for node deletion</p>
<div class="listingblock">
<div class="content">
<pre>[standalone@localhost:9990 /] /subsystem=datasources/data-source=myDataSource:remove
{
    "outcome" =&gt; "success",
    "response-headers" =&gt; {
        "operation-requires-reload" =&gt; true,
        "process-state" =&gt; "reload-required"
    }
}</pre>
</div>
</div>
<div class="paragraph">
<p>Replace myDataSource with the name of the data source you want to remove.</p>
</div>
</li>
</ol>
</div>
</li>
</ol>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_tab_completion"><a class="anchor" href="#_tab_completion"></a>Tab Completion</h3>
<div class="ulist">
<ul>
<li>
<p>Tab completion displays available commands at any point in a command.</p>
</li>
<li>
<p>You can enter /. Then, press Tab to view all possible values after the / character.</p>
<div class="listingblock">
<div class="content">
<pre>[vagrant@server ~]$ $JBOSS_HOME/bin/jboss-cli.sh --connect  \
--user=XXXXX --password=XXXXX
[standalone@localhost:9990 /] /
core-service          extension             socket-binding-group
deployment            interface             subsystem
deployment-overlay    path                  system-property</pre>
</div>
</div>
</li>
<li>
<p>Scripts can be executed using text files, and batch commands support multiple operations in one atomic unit, ensuring rollback if any operation fails.</p>
</li>
<li>
<p>External scripts can integrate with the CLI using the <code>--command</code> or <code>--commands</code> attribute.</p>
</li>
</ul>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Start typing interface after the / character, and press Tab.</p>
</li>
<li>
<p>The management CLI not only completes the interface sub-level, but it adds an equals sign, because an equals sign is the only possible value after /interface.</p>
</li>
<li>
<p>Press Tab again and all the interfaces display:</p>
<div class="listingblock">
<div class="content">
<pre>[standalone@localhost:9990 /] /interface=
management  public</pre>
</div>
</div>
</li>
</ol>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_running_a_management_cli_script_file"><a class="anchor" href="#_running_a_management_cli_script_file"></a>Running a Management CLI Script File</h3>
<div class="ulist">
<ul>
<li>
<p>The Red Hat JBoss EAP 8 supports script files for CLI management, aiding in repetitive tasks.</p>
</li>
<li>
<p>For instance, you can configure a data source and test its connection by create a script as shown below:</p>
<div class="listingblock">
<div class="content">
<pre>[vagrant@server ~]$ <strong>sudo vi /opt/create-datasource.cli</strong>
/subsystem=datasources/data-source=appDs:add(jndi-name=java:jboss/datasources/appDS,driver-name=h2,user-name=jb248,password=jb248,connection-url="jdbc:h2:mem:app;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE")
/subsystem=datasources/data-source=appDs:test-connection-in-pool</pre>
</div>
</div>
</li>
<li>
<p>Execute script <code>/opt/create-datasource.cli</code> as shown below:</p>
<div class="listingblock">
<div class="content">
<pre>[vagrant@server ~]$ sudo -u jboss /opt/EAP-8.0.0/bin/jboss-cli.sh \
--connect --controller=localhost:9990 \
--file=/opt/create-datasource.cli
{
    "outcome" =&gt; "success",
    "response-headers" =&gt; {"process-state" =&gt; "reload-required"}
}
{
    "outcome" =&gt; "success",
    "result" =&gt; [true],
    "response-headers" =&gt; {"process-state" =&gt; "reload-required"}
}</pre>
</div>
</div>
</li>
<li>
<p>Also, you can execute multiple commands using the <code>--commands</code> attribute:</p>
<div class="listingblock">
<div class="content">
<pre>[vagrant@server ~]$ sudo -u jboss /opt/EAP-8.0.0/bin/jboss-cli.sh \
--connect --controller=localhost:9990 \
--commands="cd /subsystem=datasources, ls"
data-source
jdbc-driver
xa-data-source
installed-drivers=[{"driver-name" =&gt; "h2","deployment-name" =&gt; undefined,"driver-module-name" =&gt; "com.h2database.h2","module-slot" =&gt; "main","driver-datasource-class-name" =&gt; "","driver-xa-datasource-class-name" =&gt; "org.h2.jdbcx.JdbcDataSource","datasource-class-info" =&gt; [{"org.h2.jdbcx.JdbcDataSource" =&gt; {"URL" =&gt; "java.lang.String","description" =&gt; "java.lang.String","loginTimeout" =&gt; "int","password" =&gt; "java.lang.String","url" =&gt; "java.lang.String","user" =&gt; "java.lang.String"}}],"driver-class-name" =&gt; "org.h2.Driver","driver-major-version" =&gt; 2,"driver-minor-version" =&gt; 1,"jdbc-compliant" =&gt; true}]</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_lab_executing_red_hat_jboss_eap_8_commands"><a class="anchor" href="#_lab_executing_red_hat_jboss_eap_8_commands"></a>Lab: Executing Red Hat JBoss EAP 8 commands</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>Outcome</strong>: In this lab, you execute different JBoss EAP 8 commands.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Connect to the server or domain controller.</p>
<div class="listingblock">
<div class="content">
<pre>[vagrant@server bin]$ $JBOSS_HOME/bin/jboss-cli.sh
[disconnected /] connect
[standalone@localhost:9990 /]</pre>
</div>
</div>
</li>
<li>
<p>Change the current node path to <code>user.home</code> as shown in below command.</p>
<div class="listingblock">
<div class="content">
<pre>[standalone@localhost:9990 /] cd path=user.home
[standalone@localhost:9990 /] cd /
[standalone@localhost:9990 /]</pre>
</div>
</div>
</li>
<li>
<p>List contents of current node path.</p>
<div class="listingblock">
<div class="content">
<pre>[standalone@localhost:9990 /] cd path=user.home
[standalone@localhost:9990 path=user.home] ls
name=user.home         read-only=true
path=/home/jboss       relative-to=undefined</pre>
</div>
</div>
</li>
<li>
<p>Display the help page.</p>
<div class="listingblock">
<div class="content">
<pre>[standalone@localhost:9990 /] help
SYNOPSIS
    help ( [&lt;command or operation name&gt;] | [--commands] )
...output_omitted...</pre>
</div>
</div>
</li>
<li>
<p>Display the history of commands executed so far.</p>
<div class="listingblock">
<div class="content">
<pre>[standalone@localhost:9990 /] history
help
...output_omitted...</pre>
</div>
</div>
</li>
<li>
<p>Print version and environment information.</p>
<div class="listingblock">
<div class="content">
<pre>[standalone@localhost:9990 /] version
JBoss Admin Command-line Interface
JBOSS_HOME: /opt/EAP-8.0.0
Release: 21.0.5.Final-redhat-00001
Product: JBoss EAP 8.0 Update 1.0
JAVA_HOME: null
java.version: 17.0.6
java.vm.vendor: Red Hat, Inc.
java.vm.version: 17.0.6+10-LTS
os.name: Linux
os.version: 5.14.0-284.25.1.el9_2.x86_64</pre>
</div>
</div>
</li>
<li>
<p>Print the current working node.</p>
<div class="listingblock">
<div class="content">
<pre>[standalone@localhost:9990 /] cd path=user.home
[standalone@localhost:9990 path=user.home] pwd
/path=user.home</pre>
</div>
</div>
</li>
<li>
<p>Manage resources of the /subsystem=datasources/data-source type.</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a data source named "myDataSource" with the following configuration:</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p><strong>JNDI name</strong>: java:jboss/datasources/myDataSource</p>
</li>
<li>
<p><strong>Driver name</strong>: h2</p>
</li>
<li>
<p><strong>Username</strong>: myUsername</p>
</li>
<li>
<p><strong>Password</strong>: myPassword</p>
</li>
<li>
<p><strong>Connection URL</strong>: jdbc:h2:mem:test</p>
</li>
</ol>
</div>
</li>
<li>
<p>Add the data source:</p>
<div class="listingblock">
<div class="content">
<pre>[standalone@localhost:9990 /] /subsystem=datasources/data-source=myDataSource:add(jndi-name=java:jboss/datasources/myDataSource, driver-name=h2, user-name=myUsername, password=myPassword, connection-url="jdbc:h2:mem:test")
{"outcome" =&gt; "success"}</pre>
</div>
</div>
</li>
<li>
<p>Test the connection:</p>
<div class="listingblock">
<div class="content">
<pre>[standalone@localhost:9990 /] /subsystem=datasources/data-source=myDataSource:test-connection-in-pool
{
    "outcome" =&gt; "success",
    "result" =&gt; [true]
}</pre>
</div>
</div>
</li>
<li>
<p>This will create the data source and test the connection to ensure it&#8217;s functioning correctly. You can adjust the configuration parameters as needed for your specific use case.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Quit the management CLI.</p>
<div class="listingblock">
<div class="content">
<pre>[standalone@localhost:9990 /] exit</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="eap-config.html">Red Hat JBoss EAP 8 Configuration</a></span>
  <span class="next"><a href="deploy.html">Deploying Applications to a Standalone Server</a></span>
</nav>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <img src="../../../_/img/rhl-logo-red.png" height="40px" alt="Red Hat"  href="https://redhat.com" >
</footer><script id="site-script" src="../../../_/js/site.js" data-ui-root-path="../../../_"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
