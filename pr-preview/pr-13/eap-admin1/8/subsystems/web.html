<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Configuring the Web Subsystem :: Red Hat JBoss EAP Administration I</title>
    <link rel="prev" href="messaging.html">
    <meta name="generator" content="Antora 3.1.3">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <script>var uiRootPath = '../../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://www.redhat.com" target="_blank"><img
          src="../../../_/img/redhat-logo.png"
          height="40px"
          alt="Red Hat"
        /></a>
      <a
        class="navbar-item"
        style="font-size: 24px; color: white"
        href="../../.."
      >Red Hat JBoss EAP Administration I</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a
          class="navbar-item"
          href="https://github.com/RedHatQuickCourses/eap-admin1/issues"
          target="_blank"
        >Report Issues</a>
      </div>
    </div>
  </nav>
</header><div class="body">
<div class="nav-container" data-component="eap-admin1" data-version="8">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">Red Hat JBoss EAP Administration I</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../index.html">Home</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../install/index.html">Introduction to Red Hat JBoss EAP 8</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../install/install.html">Red Hat JBoss Enterprise Application Platform 8 Installation Methods</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../install/admin.html">Managing Red Hat JBoss EAP 8</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../install/extensions.html">Interpreting Extensions, Subsystems, and Profiles</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../config/index.html">Configuration</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../config/eap-config.html">Red Hat JBoss EAP 8 Configuration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../config/eap-cli.html">Red Hat JBoss EAP 8 CLI</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../config/deploy.html">Deploying Applications to a Standalone Server</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="index.html">Subsystems</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="database.html">Exploring the Data Source Subsystem</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="logging.html">Configuring Logging</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="messaging.html">Configuring Messaging (JMS)</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="web.html">Configuring the Web Subsystem</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Red Hat JBoss EAP Administration I</span>
    <span class="version">8</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="../index.html">Red Hat JBoss EAP Administration I</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">8</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">Red Hat JBoss EAP Administration I</a></li>
    <li><a href="index.html">Subsystems</a></li>
    <li><a href="web.html">Configuring the Web Subsystem</a></li>
  </ul>
</nav>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Configuring the Web Subsystem</h1>
<div class="sect1">
<h2 id="_configuring_the_root_web_application"><a class="anchor" href="#_configuring_the_root_web_application"></a>Configuring the Root Web Application</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Any application you deploy on Red Hat JBoss EAP 8 uses a standard HTTP address.</p>
</li>
<li>
<p>For example, an application called <strong>app.war</strong> is available, by default, at <a href="http://&lt;server&gt;:8080/app" class="bare">http://&lt;server&gt;:8080/app</a>.</p>
</li>
<li>
<p>The <strong>/app</strong> is defined as the context path according to the Jakarta Enterprise Edition (Jakarta EE) specifications. If a HTTP request does not provide a context path , then JBoss EAP displays a default JBoss welcome application.</p>
<div class="listingblock">
<div class="content">
<pre>&lt;subsystem xmlns="urn:jboss:domain:undertow:12.0" ...&gt;
            &lt;buffer-cache name="default"/&gt;
            &lt;server name="default-server"&gt;
...output omitted...
                &lt;host name="default-host" alias="localhost"&gt;
                    &lt;location name="/" handler="welcome-content"/&gt;
                    &lt;http-invoker security-realm="ApplicationRealm"/&gt;
                &lt;/host&gt;
            &lt;/server&gt;
...output omitted...
            &lt;handlers&gt;
                &lt;file name="welcome-content" path="${jboss.home.dir}/welcome-content"/&gt;
            &lt;/handlers&gt;
        &lt;/subsystem&gt;</pre>
</div>
</div>
</li>
<li>
<p>Notice that the / root path uses a handler called welcome-content, and that this welcome-content handler defines the location of the JBoss welcome application.</p>
</li>
<li>
<p>The default application can be replaced in one of two ways:</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Changing the welcome-content file handler.</p>
</li>
<li>
<p>Changing the default-web-module attribute on the default-host tag in the undertow subsystem.</p>
</li>
</ol>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_configure_server_listeners"><a class="anchor" href="#_configure_server_listeners"></a>Configure Server Listeners</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>The undertow subsystem can start several web servers or web containers in a single JBoss EAP instance.</p>
</li>
<li>
<p>Each <strong>&lt;server&gt;</strong> tag starts an instance of the undertow web engine.</p>
</li>
<li>
<p>A listener handles requests according to the request protocol.</p>
</li>
<li>
<p>Three listener types are available for each server:</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>HTTP</strong>: This listener type handles HTTP requests.</p>
</li>
<li>
<p><strong>HTTPS</strong>: This listener type handles HTTPS requests.</p>
</li>
<li>
<p><strong>AJP</strong>: This listener type handles Apache Java Protocol (AJP) requests. The AJP protocol communicates JBoss EAP instances with the load balancer.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Each server can define more than one listener for each listener type. The following command creates an HTTP listener:</p>
<div class="listingblock">
<div class="content">
<pre>/subsystem=undertow/server=default-server/http-listener=\
new-http:add(socket-binding=http-other)</pre>
</div>
</div>
</li>
<li>
<p>The previous command generates the following XML configuration:</p>
<div class="listingblock">
<div class="content">
<pre>&lt;subsystem xmlns="urn:jboss:domain:undertow:12.0" ...&gt;
...output omitted...
  &lt;server name="default-server"&gt;
    &lt;http-listener name="default" redirect-socket="https" socket-binding="http" /&gt;
    <strong>&lt;http-listener name="new-http" socket-binding="http-other" /&gt;</strong>
    &lt;host name="default-host" alias="localhost"&gt;
      &lt;location name="/" handler="welcome-content" /&gt;
    &lt;/host&gt;
  &lt;/server&gt;
...output omitted...
&lt;/subsystem&gt;</pre>
</div>
</div>
</li>
<li>
<p>You must define a different socket-binding to avoid a port conflict.</p>
</li>
<li>
<p>The server&#8217;s host configuration manages virtual hosts, grouping web applications by DNS names. The following management CLI adds a host to the server:</p>
<div class="listingblock">
<div class="content">
<pre>/subsystem=undertow/server=default-server/host=\
version-host:add(alias=[version.myapp.com])</pre>
</div>
</div>
</li>
<li>
<p>You can publish a default web application on a host listening to multiple addresses. The following command defines the default web application for the new host:</p>
<div class="listingblock">
<div class="content">
<pre>/subsystem=undertow/server=default-server/host=\
version-host:write-atribute(name=default-web-module, value=version.war)</pre>
</div>
</div>
</li>
<li>
<p>In the previous example, the version.war application serves the requests to <strong><a href="http://version.myapp.com" class="bare">http://version.myapp.com</a></strong>. The following XML reflects the previous modification:</p>
<div class="listingblock">
<div class="content">
<pre>&lt;subsystem xmlns="urn:jboss:domain:undertow:12.0" ...&gt;
...output omitted...
  &lt;server name="default-server"&gt;
    &lt;http-listener name="default" redirect-socket="https" socket-binding="http" /&gt;
    &lt;http-listener name="new-http" socket-binding="http-other" /&gt;
    &lt;host name="default-host" alias="localhost"&gt;
      &lt;location name="/" handler="welcome-content" /&gt;
    &lt;/host&gt;
    <strong>&lt;host name="version-host" default-web-module="version.war" alias="version.myapp.com"/&gt;</strong>
  &lt;/server&gt;
...output omitted...
&lt;/subsystem&gt;</pre>
</div>
</div>
</li>
<li>
<p>From the application perspective, you must use the <strong>$WEBAPP/WEB-INF/jboss-web.xml</strong> file within the application to define the application context root, and to reference the virtual host and the server instance:</p>
<div class="listingblock">
<div class="content">
<pre>&lt;jboss-web&gt;
  &lt;context-root&gt;/&lt;/context-root&gt;
  &lt;virtual-host&gt;version-host&lt;/virtual-host&gt;
  &lt;server-instance&gt;default-server&lt;/server-instance&gt;
&lt;/jboss-web&gt;</pre>
</div>
</div>
</li>
<li>
<p>If the new host is no longer required, then you can delete it with the following command:</p>
<div class="listingblock">
<div class="content">
<pre>/subsystem=undertow/server=default-server/host=\
version-host:remove()</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_configure_ssl_connections"><a class="anchor" href="#_configure_ssl_connections"></a>Configure SSL Connections</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>HTTPS is a protocol that encrypts network traffic.</p>
</li>
<li>
<p>Red Hat JBoss EAP 8 can encrypt the traffic in both HTTP ports: the management port, and the application serving port.</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_https_configuration_with_the_legacy_security_subsystem"><a class="anchor" href="#_https_configuration_with_the_legacy_security_subsystem"></a>HTTPS Configuration with the Legacy Security Subsystem</h3>
<div class="ulist">
<ul>
<li>
<p>The Java Standard Edition (Java SE) defines the format of the Java KeyStore.</p>
</li>
<li>
<p>A Java KeyStore (JKS) is a storage facility for cryptographic keys and certificates.</p>
</li>
<li>
<p>A JKS can store several types of public and private keys, such as the certificates used for a HTTPS connection.</p>
</li>
<li>
<p>The Java Development Kit (JDK) provides the keytool command to manage JKS repositories.</p>
</li>
<li>
<p>To create a new JKS by importing a CA signed certificate, use the following command:</p>
<div class="listingblock">
<div class="content">
<pre>keytool -v -importkeystore -srckeystore signed-cert.p12 -srcstoretype PKCS12 -destkeystore identity.jks -deststoretype JKS</pre>
</div>
</div>
</li>
<li>
<p>After creating the keystore, you must create a security realm for each host:</p>
<div class="listingblock">
<div class="content">
<pre>/host=servera/core-service=management/security-realm=HTTPSRealm:add()</pre>
</div>
</div>
</li>
<li>
<p>Configure the security realm to load the JKS:</p>
<div class="listingblock">
<div class="content">
<pre>/host=servera/core-service=management/security-realm=HTTPSRealm/server-identity=\
ssl:add(keystore-path=/path/identity.jks,keystore-password=changeit,alias=appserver)</pre>
</div>
</div>
</li>
<li>
<p>Reload the server to apply the changes:</p>
<div class="listingblock">
<div class="content">
<pre>/:reload-servers</pre>
</div>
</div>
</li>
<li>
<p>Create a HTTPS listener, which uses the new security realm:</p>
<div class="listingblock">
<div class="content">
<pre>/profile=full/subsystem=undertow/server=default-server/https-listener=https:\
add(socket-binding=https,security-realm=HTTPSRealm)</pre>
</div>
</div>
</li>
</ul>
</div>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p>Remember to open the HTTPS port in the firewall. The default port for HTTPS is 8443.</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_lab_configuring_the_web_subsystem"><a class="anchor" href="#_lab_configuring_the_web_subsystem"></a>Lab: Configuring the Web Subsystem</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>Outcome:</strong> In this lab, you access Red Hat JBoss EAP 8 by using a secure connection from a browser, enable AJP, and set a maximum number of HTTP concurrent connections.</p>
</div>
<div class="paragraph">
<p><strong>Pre-requisites</strong>: Download the two applications (WAR files) we will deploy in this exercise under /opt directory:</p>
</div>
<div class="paragraph">
<p><a href="https://github.com/RedHatQuickCourses/eap-qc-apps/releases/download/eap8-lp/temperature-converter.war" class="bare">https://github.com/RedHatQuickCourses/eap-qc-apps/releases/download/eap8-lp/temperature-converter.war</a></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Start the JBoss EAP standalone server.</p>
<div class="listingblock">
<div class="content">
<pre>[vagrant@server ~]$ cd /opt/EAP-8.0.0/bin
[vagrant@server bin]$ ./standalone.sh \
-b server.example.com</pre>
</div>
</div>
</li>
<li>
<p>Deploy the temperature converter application.</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open a new terminal window and run the following commands to start the management CLI connection to your JBoss EAP instance:</p>
<div class="listingblock">
<div class="content">
<pre>[vagrant@server ~]$ cd /opt/EAP-8.0.0/bin
[vagrant@server bin]$ sudo -u jboss ./jboss-cli.sh -c
[standalone@localhost:9990 /]</pre>
</div>
</div>
</li>
<li>
<p>Deploy the /opt/temperature-converter.war application file:</p>
<div class="listingblock">
<div class="content">
<pre>[standalone@localhost:9990 /] deploy \
/opt/temperature-converter.war</pre>
</div>
</div>
</li>
<li>
<p>Open a web browser on the server and navigate to <a href="http://server.example.com:8080/temperature-converter" class="bare">http://server.example.com:8080/temperature-converter</a> to validate the deployment. The application front page shows.</p>
<div class="imageblock text-center">
<div class="content">
<img src="_images/new7.png" alt="new7">
</div>
</div>
</li>
<li>
<p>Open a web browser on the workstation and navigate to <a href="https://server.example.com:8443/temperature-converter" class="bare">https://server.example.com:8443/temperature-converter</a> to validate the HTTPS connection. The browser self-signed certificate security warning shows.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Create a Java Key Store (JKS) by importing the certificate that the exercise provides.</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In a new terminal, change to the exercise working directory, and import the <strong>workstation.p12</strong> private certificate into a new <strong>identity.jks</strong> by using the keytool command.</p>
<div class="listingblock">
<div class="content">
<pre>[vagrant@server ~]$ cd /opt/
[vagrant@server opt]$ keytool -v -importkeystore \
-srckeystore workstation.p12 -srcstoretype PKCS12 \
-destkeystore identity.jks -deststoretype JKS
Importing keystore workstation.p12 to identity.jks...
Enter destination keystore password:
Re-enter new password:
Enter source keystore password:
Entry for alias 1 successfully imported.
Import command completed:  1 entries successfully imported, 0 entries failed or cancelled
[Storing identity.jks]

Warning:
The JKS keystore uses a proprietary format. It is recommended to migrate to PKCS12 which is an industry standard format using "keytool -importkeystore -srckeystore identity.jks -destkeystore identity.jks -deststoretype pkcs12".</pre>
</div>
</div>
</li>
<li>
<p>You can safely ignore the warning about the JKS format.</p>
</li>
<li>
<p>Verify that the certificates that are available in the <strong>identity.jks</strong> keystore. Use the password value as the keystore password.</p>
<div class="listingblock">
<div class="content">
<pre>[vagrant@server opt]$ keytool -list -v \
 -keystore /opt/identity.jks

Enter keystore password:
Keystore type: JKS
Keystore provider: SUN

Your keystore contains 1 entry

Alias name: 1
Creation date: Oct 23, 2023
Entry type: PrivateKeyEntry
Certificate chain length: 1
Certificate[1]:
Owner: CN=server.example.com, O=EXAMPLE.COM
Issuer: CN=Red Hat Training Certificate Authority, O=EXAMPLE.COM
Serial number: 1c
Valid from: Thu Apr 25 15:55:36 EDT 2024 until: Tue Apr 25 15:55:36 EDT 2029
...output omitted...
#6: ObjectId: 2.5.29.17 Criticality=false
SubjectAlternativeName [
  DNSName: server.example.com
  DNSName: *.server.example.com
]
...output omitted...</pre>
</div>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Create the SSL connection configuration. Configure the https listener in the undertow subsystem by using the management CLI. To do this, create a HTTPSRealm security realm to store the certificate information.</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Return to the management CLI and add an HTTPSRealm security realm to the management core service:</p>
<div class="listingblock">
<div class="content">
<pre>[standalone@localhost:9990 /] /core-service=\
management/security-realm=HTTPSRealm:add()
{"outcome" =&gt; "success"}</pre>
</div>
</div>
</li>
<li>
<p>Configure the HTTPSRealm realm to load the <strong>/opt/identity.jks</strong> keystore file. Use the password value as the password, and 1 as the alias.</p>
<div class="listingblock">
<div class="content">
<pre>[standalone@localhost:9990 /] /core-service=management/security-realm=\
HTTPSRealm/server-identity=ssl:add\
(keystore-path=/opt/identity.jks, \
keystore-password=password, alias=1)
{
    "outcome" =&gt; "success",
    "response-headers" =&gt; {
        "operation-requires-reload" =&gt; true,
        "process-state" =&gt; "reload-required"
    }
}</pre>
</div>
</div>
</li>
<li>
<p>Reload the server to enable the new realm:</p>
<div class="listingblock">
<div class="content">
<pre>[standalone@localhost:9990 /] reload</pre>
</div>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Configure the HTTPS listener.</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Modify the HTTPS listener to use the HTTPSRealm security realm.</p>
<div class="listingblock">
<div class="content">
<pre>[standalone@localhost:9990 /] /subsystem=undertow/server=default-server/\
https-listener=https:write-attribute(name=security-realm,value=HTTPSRealm)
{
    "outcome" =&gt; "success",
    "response-headers" =&gt; {
        "operation-requires-reload" =&gt; true,
        "process-state" =&gt; "reload-required"
    }
}</pre>
</div>
</div>
</li>
<li>
<p>Reload the server to enable the new realm in the https connector:</p>
<div class="listingblock">
<div class="content">
<pre>[standalone@localhost:9990 /] reload
Open a web browser and navigate to <a href="https://server.example.com:8443/temperature-converter" class="bare">https://server.example.com:8443/temperature-converter</a> to test the SSL connection.</pre>
</div>
</div>
</li>
<li>
<p>The SSL connection is available for all applications including the root application. Navigate to <a href="https://server.example.com:8443/" class="bare">https://server.example.com:8443/</a> and test the SSL connection for the root application.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Enable the AJP protocol.</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>To enable the AJP protocol, you must configure the AJP listener. Run the following command to enable the AJP protocol:</p>
<div class="listingblock">
<div class="content">
<pre>[standalone@localhost:9990 /] /subsystem=undertow/server=\
default-server/ajp-listener=ajp:add(socket-binding=ajp)
{"outcome" =&gt; "success"}</pre>
</div>
</div>
</li>
<li>
<p>Verify that the AJP listener is configured by reading its properties:</p>
<div class="listingblock">
<div class="content">
<pre>[standalone@localhost:9990 /] /subsystem=undertow/server=\
default-server/ajp-listener=ajp:read-resource
{
    "outcome" =&gt; "success",
    "result" =&gt; {
        "allow-encoded-slash" =&gt; false,
        "allow-equals-in-cookie-value" =&gt; false,
        "allow-unescaped-characters-in-url" =&gt; false,
        "always-set-keep-alive" =&gt; true,
        "buffer-pipelined-data" =&gt; false,
        "buffer-pool" =&gt; "default",
        "decode-url" =&gt; true,
        "disallowed-methods" =&gt; ["TRACE"],
        "enabled" =&gt; true,
        "max-ajp-packet-size" =&gt; 8192,
        "max-buffered-request-size" =&gt; 16384,
        "max-connections" =&gt; undefined,
        "max-cookies" =&gt; 200,
        "max-header-size" =&gt; 1048576,
        "max-headers" =&gt; 200,
        "max-parameters" =&gt; 1000,
        "max-post-size" =&gt; 10485760L,
        "no-request-timeout" =&gt; 60000,
        "read-timeout" =&gt; undefined,
        "receive-buffer" =&gt; undefined,
        "record-request-start-time" =&gt; false,
        "redirect-socket" =&gt; undefined,
        "request-parse-timeout" =&gt; undefined,
        "resolve-peer-address" =&gt; false,
        "rfc6265-cookie-validation" =&gt; false,
        "scheme" =&gt; undefined,
        "secure" =&gt; false,
        "send-buffer" =&gt; undefined,
        "socket-binding" =&gt; "ajp",
        "tcp-backlog" =&gt; 10000,
        "tcp-keep-alive" =&gt; undefined,
        "url-charset" =&gt; "UTF-8",
        "worker" =&gt; "default",
        "write-timeout" =&gt; undefined
    }
}</pre>
</div>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Tuning the HTTP listener.</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>By default, the maximum connections number of all the listeners is unlimited. To avoid excessive compute resources usage, and to have a predictable capacity, set the maximum possible connections for the HTTP listener.</p>
</li>
<li>
<p>You can update the number of connections by using the default server within the undertow subsystem. Set the maximum possible connections to 200 in the http-listener section:</p>
<div class="listingblock">
<div class="content">
<pre>[standalone@localhost:9990 /] /subsystem=undertow/server=\
default-server/http-listener=default:\
write-attribute(name=max-connections, value=200)
{
    "outcome" =&gt; "success",
    "response-headers" =&gt; {
        "operation-requires-reload" =&gt; true,
        "process-state" =&gt; "reload-required"
    }
}</pre>
</div>
</div>
</li>
<li>
<p>Reload the server to enable the maximum connections value:</p>
<div class="listingblock">
<div class="content">
<pre>[standalone@localhost:9990 /] reload
{
    "outcome" =&gt; "success",
    "result" =&gt; undefined
}</pre>
</div>
</div>
</li>
<li>
<p>Verify that the max-connections attribute was changed:</p>
<div class="listingblock">
<div class="content">
<pre>[standalone@localhost:9990 /] /subsystem=undertow/server=\
default-server/http-listener=default:read-attribute(name=max-connections)
{
    "outcome" =&gt; "success",
    "result" =&gt; 200
}</pre>
</div>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Exit the management CLI, and stop Red Hat JBoss EAP 8 the instance by pressing <strong>Ctrl+C</strong> in the terminal window.</p>
</li>
</ul>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="messaging.html">Configuring Messaging (JMS)</a></span>
</nav>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <img src="../../../_/img/rhl-logo-red.png" height="40px" alt="Red Hat"  href="https://redhat.com" >
</footer><script id="site-script" src="../../../_/js/site.js" data-ui-root-path="../../../_"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
